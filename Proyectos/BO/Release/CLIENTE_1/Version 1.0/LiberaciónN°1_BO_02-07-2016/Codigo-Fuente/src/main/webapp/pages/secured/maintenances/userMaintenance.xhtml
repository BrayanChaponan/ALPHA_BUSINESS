<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	template="/templates/template.xhtml">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction action="#{userMaintenanceMB.load()}" />
		</f:metadata>
	</ui:define>

	<ui:define name="content">

		<!-- Divs principales que casi siempre iran en un page -->
		<div id="main-content">
			<div class="container">
				<div class="row">
					<div id="content" class="col-lg-12">
						<!-- /Divs principales que casi siempre iran en un page -->

						<!-- PAGE HEADER-->
						<div class="row">
							<div class="col-sm-12">
								<div class="page-header">
									<div class="clearfix">
										<h3 class="content-title pull-left">#{i18n['userMaintenance.label.title']}</h3>
									</div>
									<div class="description">#{i18n['userMaintenance.label.subtitle']}</div>
								</div>
							</div>
						</div>
						<!-- /PAGE HEADER -->

						<!-- PAGE BODY -->
						
						<!--  Filtros de busqueda y boton nuevo -->
						<h:panelGroup id="pnlUserListFilters" layout="block">

							<div class="row">
								<div class="col-md-12">
									<div class="box-body">
										<h:form class="form-horizontal" prependId="false">
											<table>
												<tr>
													<td>
														<div class="col-md-12">
															<button
																jsf:outcome="/pages/secured/maintenances/userEdit"
																class="btn btn-primary">
																<i class="fa fa-plus"></i><span class="menu-text">
																	#{i18n['userMaintenance.button.userRegister']}</span>
															</button>
														</div>
													</td>
												</tr>
											</table>
										</h:form>
									</div>
								</div>
							</div>
						</h:panelGroup>
						<!--  /Filtros de busqueda y boton nuevo -->

						<div class="separator"></div>
						
						<!-- Tabla de datos -->
						<div class="row">
							<div class="col-md-12">
								<!-- BOX -->
								<div class="box border purple">
									<div class="box-title">
										<h4>
											<i class="fa fa-table"></i>#{i18n['userMaintenance.label.title']}
										</h4>
										<div class="tools hidden-xs">
											<a href="javascript:;" class="reload"> <i
												class="fa fa-refresh"></i>
											</a> <a href="javascript:;" class="collapse"> <i
												class="fa fa-chevron-up"></i>
											</a> <a href="javascript:;" class="remove"> <i
												class="fa fa-times"></i>
											</a>
										</div>
									</div>
									<div class="box-body">

										<h:panelGroup rendered="#{empty usersList}">
											<div class="alert alert-block alert-danger fade in">
												<h:outputText
													value="#{i18n['userMaintenance.label.usersListEmpty']}" />
											</div>
										</h:panelGroup>

										<h:dataTable id="datatable2" value="#{usersList}" var="user"
											styleClass="datatable table table-striped table-bordered table-hover"
											columnClasses="none,none,hidden-xs,hidden-xs,hidden-xs,hidden-xs,none"
											rendered="#{not empty usersList}">
											<h:column>
												<f:facet name="header">#{i18n['userMaintenance.column.userName']}</f:facet>
												<h:outputText value="#{user.userName}" />
												<f:facet name="footer">#{i18n['userMaintenance.column.userName']}</f:facet>
											</h:column>
											<h:column>
												<f:facet name="header">#{i18n['userMaintenance.column.firstName']}</f:facet>
												<h:outputText value="#{user.firstName}" />
												<f:facet name="footer">#{i18n['userMaintenance.column.firstName']}</f:facet>
											</h:column>
											<h:column headerClass="hidden-xs" footerClass="hidden-xs">
												<f:facet name="header">#{i18n['userMaintenance.column.lastName']}</f:facet>
												<h:outputText value="#{user.lastName}" />
												<f:facet name="footer">#{i18n['userMaintenance.column.lastName']}</f:facet>
											</h:column>
											<h:column headerClass="hidden-xs" footerClass="hidden-xs">
												<f:facet name="header">#{i18n['userMaintenance.column.email']}</f:facet>
												<h:outputText value="#{user.email}" />
												<f:facet name="footer">#{i18n['userMaintenance.column.email']}</f:facet>
											</h:column>
											<h:column headerClass="hidden-xs" footerClass="hidden-xs">
												<f:facet name="header">#{i18n['userMaintenance.column.role']}</f:facet>
												<h:outputText value="#{user.secRole.name}" />
												<f:facet name="footer">#{i18n['userMaintenance.column.role']}</f:facet>
											</h:column>
											<h:column headerClass="hidden-xs" footerClass="hidden-xs">
												<f:facet name="header">#{i18n['userMaintenance.column.status']}</f:facet>
												<h:outputText
													value="#{user.status eq 'A' ? i18n['userMaintenance.label.active'] : i18n['userMaintenance.label.inactive']}" />
												<f:facet name="footer">#{i18n['userMaintenance.column.status']}</f:facet>
											</h:column>
											<h:column>
												<f:facet name="header">ON/OFF</f:facet>
												<div class="make-switch switch-mini" onclick="changeStatus();" >
													<h:selectBooleanCheckbox  value="#{user.statusBool}" />
												</div>
												<f:facet name="footer">ON/OFF</f:facet>
											</h:column>
											<h:column>
												<h:commandButton id="btnChangeStatus" style="display: inline;">
													<f:ajax event="click" listener="#{userMaintenanceMB.changeStatus(user)}" render="@this"/>
												</h:commandButton>
											</h:column>
											
											<h:column>
												<f:facet name="header">#{i18n['userMaintenance.column.edit']}</f:facet>
												<button class="btn btn-xs btn-info"
													title="Edit #{user.userName}"
													jsf:outcome="/pages/secured/maintenances/userEdit">
													<i class="fa fa-pencil-square-o"></i>
													<f:param name="userId" value="#{user.userId}" />
												</button>
												<f:facet name="footer">#{i18n['userMaintenance.column.edit']}</f:facet>
											</h:column>
										</h:dataTable>
									</div>
								</div>
								<!-- /BOX -->
							</div>
						</div>
						<!-- /Tabla de datos -->

						<div class="footer-tools">
							<span class="go-top"> <i class="fa fa-chevron-up"></i> Top
							</span>
						</div>
						<!-- /PAGE BODY -->
					</div>
				</div>
			</div>
		</div>
	</ui:define>

	<ui:define name="js">
		<!-- JQUERY -->
		<h:outputScript library="libs/cloud-admin/js/jquery"
			name="jquery-2.0.3.min.js" />
		<!-- JQUERY UI-->
		<h:outputScript
			library="libs/cloud-admin/js/jquery-ui-1.10.3.custom/js"
			name="jquery-ui-1.10.3.custom.min.js" />
		<!-- BOOTSTRAP -->
		<h:outputScript library="libs/bootstrap-dist/js"
			name="bootstrap.min.js" />
		<!-- DATE RANGE PICKER -->
		<h:outputScript
			library="libs/cloud-admin/js/bootstrap-daterangepicker"
			name="moment.min.js" />
		<h:outputScript
			library="libs/cloud-admin/js/bootstrap-daterangepicker"
			name="daterangepicker.min.js" />
		<!-- SLIMSCROLL -->
		<h:outputScript library="libs/cloud-admin/js/jQuery-slimScroll-1.3.0"
			name="jquery.slimscroll.min.js" />
		<h:outputScript library="libs/cloud-admin/js/jQuery-slimScroll-1.3.0"
			name="slimScrollHorizontal.min.js" />
		<!-- BLOCK UI -->
		<h:outputScript library="libs/cloud-admin/js/jQuery-BlockUI"
			name="jquery.blockUI.min.js" />
		<!-- BOOTSTRAP SWITCH -->
		<h:outputScript library="libs/cloud-admin/js/bootstrap-switch"
			name="bootstrap-switch.min.js" />
		<!-- BOOTBOX -->
		<h:outputScript library="libs/cloud-admin/js/bootbox"
			name="bootbox.min.js" />
		<!-- DATE PICKER -->
		<h:outputScript library="libs/cloud-admin/js/datepicker"
			name="picker.js" />
		<h:outputScript library="libs/cloud-admin/js/datepicker"
			name="picker.date.js" />
		<h:outputScript library="libs/cloud-admin/js/datepicker"
			name="picker.time.js" />
		<!-- MAGIC SUGGEST -->
		<h:outputScript library="libs/cloud-admin/js/magic-suggest"
			name="magicsuggest-1.3.1-min.js" />
		<!-- DATA TABLES -->
		<h:outputScript library="libs/cloud-admin/js/datatables/media/js"
			name="jquery.dataTables.min.js" />
		<h:outputScript
			library="libs/cloud-admin/js/datatables/media/assets/js"
			name="datatables.min.js" />

		<!-- ESTE JS GENERA REPETIDAS LLAMADAS AL CONTROLLER -->
		<!-- 		<h:outputScript -->
		<!-- 			library="libs/cloud-admin/js/datatables/extras/TableTools/media/js/" -->
		<!-- 			name="TableTools.min.js" /> -->

		<h:outputScript
			library="libs/cloud-admin/js/datatables/extras/TableTools/media/js"
			name="ZeroClipboard.min.js" />
		<!-- COOKIE  -->
		<h:outputScript library="libs/cloud-admin/js/jQuery-Cookie"
			name="jquery.cookie.min.js" />

		<!-- CUSTOM SCRIPT -->
		<h:outputScript library="libs/cloud-admin/js" name="script.js" />

		<script>
			function changeStatus(){
				alert("changeStatus");
			}
			<!-- Establecer estilo activo al menu seleccionado -->
			jQuery(document).ready(function() {					
				document.getElementById('menuMaintenances').className += " active";
				document.getElementById('menuUsersMaintenance').className = "current";	
			});	
				
			jQuery(document).ready(function() {
				App.setPage("dynamic_table"); //Set current page
				App.init(); //Initialise plugins and elements
			});
			jQuery(document).ready(function() {		
				App.setPage("elements");  //Set current page
				App.init(); //Initialise plugins and elements
			});		
			jQuery(document).ready(function() {		
				App.setPage("forms");  //Set current page
				App.init(); //Initialise plugins and elements
			});	

		</script>


	</ui:define>

</ui:composition>
